# æœºåœºè®¢é˜…é€šç”¨è®¾ç½®
dy: &dy
    type: http
    udp: true
    interval: 86400
    proxy: direct
    health-check:
      enable: false
      url: https://cp.cloudflare.com/generate_204
      interval: 1800
      timeout: 5 # ç§’
      lazy: true
      expected-status: "204"
      method: HEAD
# âš ï¸ smux å¤šè·¯å¤ç”¨ï¼šéƒ¨åˆ†æœºåœºä¸æ”¯æŒï¼Œå¦‚è¿æ¥å¤±è´¥è¯·æ³¨é‡Šæœ¬æ®µ
    smux: # smuxï¼ˆè¿æ¥å¤ç”¨ï¼Œæå‡å¤šè·¯å¤ç”¨æ•ˆç‡ï¼Œå‡å°‘æ¡æ‰‹ï¼‰
      enabled: true # å¼€å¯ smux å¤šè·¯å¤ç”¨
      padding: true # å¢åŠ éšæœºæ•°æ®ï¼Œé˜²æ¢æµ‹ï¼ˆæ¨èå¼€ï¼‰
      protocol: smux # æˆ– smux4

u: &u #æ€»è®¢é˜…å¼•ç”¨
  use:
    - 1.p1
    - 2.p2
    - 3.p3
    - 4.p4

u_s: &u_s #å…¶ä»–è®¢é˜…åˆ†ç»„
  use:
    - 2.p2
    - 3.p3
    - 4.p4

proxy-providers:
  1.p1:
    url: ""
    path: ./proxy_provider/p1.yaml 
    <<: *dy
    lazy: true
    override:
      additional-prefix: "p1 |"

  2.p2:
    url: ""
    path: ./proxy_provider/p2.yaml
    <<: *dy
    lazy: true
    override:
      additional-prefix: "p2 |"

  3.p3: 
    url: ""
    path: ./proxy_provider/p3.yaml 
    <<: *dy
    lazy: true
    override:
      additional-prefix: "p3 |"

  4.p4: 
    url: ""
    path: ./proxy_provider/p4.yaml 
    <<: *dy
    lazy: true
    override:
      additional-prefix: "p4 |"

# ========== èŠ‚ç‚¹ä¿¡æ¯ ==========
proxies:
  - {name: DIRECTLY, type: direct, udp: true}
#  - {name: å®¶å®½, type: http, server: "å®¶åº­å®½å¸¦èŠ‚ç‚¹çš„IPåœ°å€", port: 1080, udp: true}
#  - {name: ä¸­è½¬èŠ‚ç‚¹, type: socks5, server: "ä¸­è½¬èŠ‚ç‚¹çš„IPåœ°å€", port: 1080}
#   - {name: è½åœ°èŠ‚ç‚¹, type: http, server: "è½åœ°èŠ‚ç‚¹çš„IPåœ°å€", port: 1080}

# ========== å…¨å±€é…ç½® ==========
port: 7890
socks-port: 7891     # SOCKS5 ä»£ç†ç«¯å£
redir-port: 7892     # é€æ˜ä»£ç†ç«¯å£ï¼Œç”¨äº Linux å’Œ MacOS
mixed-port: 7893     # HTTP(S) å’Œ SOCKS ä»£ç†æ··åˆç«¯å£
tproxy-port: 7894
allow-lan: true     # å…è®¸å±€åŸŸç½‘è¿æ¥
mode: rule
bind-address: "*"    # ç»‘å®š IP åœ°å€ï¼Œä»…ä½œç”¨äº allow-lan ä¸º trueï¼Œ'*'è¡¨ç¤ºæ‰€æœ‰åœ°å€
ipv6: false
unified-delay: true  # æ›´æ¢å»¶è¿Ÿè®¡ç®—æ–¹å¼ï¼Œå»é™¤æ¡æ‰‹ç­‰é¢å¤–å»¶è¿Ÿ
tcp-concurrent: true # å¯ç”¨ TCP å¹¶å‘è¿æ¥ã€‚è¿™å…è®¸ Clash åŒæ—¶å»ºç«‹å¤šä¸ª TCP è¿æ¥ï¼Œå¯ä»¥æé«˜ç½‘ç»œæ€§èƒ½å’Œè¿æ¥é€Ÿåº¦
log-level: warn      # æŸ¥ä¸œè¥¿æ—¶æ”¹æˆinfo
find-process-mode: 'strict' # è®¾ç½®è¿›ç¨‹æŸ¥æ‰¾æ¨¡å¼ä¸ºä¸¥æ ¼æ¨¡å¼ï¼ŒClash ä¼šæ›´ç²¾ç¡®åœ°è¯†åˆ«å’ŒåŒ¹é…ç½‘ç»œæµé‡æ¥æºçš„è¿›ç¨‹
global-client-fingerprint: chrome  # è®¾ç½®å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹ä¸º Chromeï¼Œä½¿ Clash åœ¨å»ºç«‹è¿æ¥æ—¶æ¨¡æ‹Ÿ Chrome æµè§ˆå™¨çš„ TLS æŒ‡çº¹ï¼Œå¢å¼ºéšç§æ€§å’Œç»•è¿‡æŸäº›ç½‘ç«™çš„æŒ‡çº¹æ£€æµ‹
keep-alive-idle: 600
keep-alive-interval: 15
disable-keep-alive: false

profile:
  store-selected: true # è®°å¿†é€‰æ‹©
  store-fake-ip: true

# GEOæ•°æ®åº“
geodata-mode: true
geodata-loader: memconservative
geo-auto-update: true
geo-update-interval: 48
geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.metadb"

# æ§åˆ¶é¢æ¿
external-controller: 127.0.0.1:9090
secret: "123465."
external-ui: "./ui"
external-ui-url: "https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip"

# å—…æ¢
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
# æ³¨é‡Šç”¨äºå®‰å“ä¼˜åŒ–
#    QUIC: #å¦‚ä½ æ— ä½¿ç”¨ QUIC çš„åº”ç”¨ï¼ˆå¦‚éƒ¨åˆ† YouTube CDNï¼‰ï¼Œå¯ç§»é™¤ QUIC é¡¹ã€‚
#      ports: [443, 8443]
  force-domain:
    - "+.v2ex.com"
  skip-domain:
    - "+.baidu.com"
    - "+.bilibili.com"

# å…¥ç«™  
tun:
  enable: true
  stack: mixed    # system/gvisor/mixed
  auto-route: true
  auto-redirect: true
  auto-detect-interface: false
  strict-route: false                # é¿å…å†—ä½™è·¯ç”±æ±¡æŸ“ç³»ç»Ÿè¡¨
  dns-hijack: 
    - any:53
#    - tcp://any:53 #æ³¨é‡Šç”¨äºå®‰å“ä¼˜åŒ–
  mtu: 1500                         # å‡å°‘ MTU é—®é¢˜ï¼Œå¦‚ç½‘é¡µæ— æ³•æ‰“å¼€ã€æµ‹é€Ÿæ…¢
  gso: true                         # å¯ç”¨é€šç”¨åˆ†æ®µå¸è½½ï¼ˆæå‡æ€§èƒ½ï¼‰
  gso-max-size: 65536
  udp-timeout: 300                 # UDP ä¼šè¯ä¿æŒæ—¶é—´

# DNSæ¨¡å—
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:1053
  prefer-h3: true        # å¦‚æœDNSæœåŠ¡å™¨æ”¯æŒDoH3ä¼šä¼˜å…ˆä½¿ç”¨h3ï¼Œæå‡æ€§èƒ½
  respect-rules: true    # è®© DNS è§£æéµå¾ª Clash çš„è·¯ç”±è§„åˆ™
  enhanced-mode: fake-ip # è®¾ç½®å¢å¼ºæ¨¡å¼ä¸º fake-ip æ¨¡å¼ï¼Œæé«˜è§£æé€Ÿåº¦å’Œè¿æ¥æ€§èƒ½
  cache-algorithm: arc   # ä½¿ç”¨æ€§èƒ½æ›´ä¼˜çš„ ARC ç¼“å­˜ç®—æ³•
  use-hosts: false        # ä½¿ç”¨hosts
  use-system-hosts: false # ä½¿ç”¨ç³»ç»Ÿhosts
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "rule-set:private_domain,cn_domain"
    - "geosite:connectivity-check"
    - "geosite:private"
    - "rule-set:fake_ip_filter_DustinWin"
    - "rule-set:fake_ip_filter_juewuy"
    - "*"

  default-nameserver:
    - 223.5.5.5                 # é˜¿é‡Œï¼ˆå›½å†…ï¼‰
    - 119.29.29.29              # è…¾è®¯ï¼ˆå›½å†…ï¼‰
    - system                    # ç³»ç»Ÿ DNS
#    - 8.8.8.8                   # Googleï¼ˆå¤‡ç”¨ï¼‰

  proxy-server-nameserver:      # å½“è¯·æ±‚é€šè¿‡ä»£ç†ï¼ˆå³å›½å¤–ç«™ï¼‰æ—¶ä½¿ç”¨
    - https://1.1.1.1/dns-query            # Cloudflareï¼ŒDoH3
    - https://dns.google/dns-query         # Googleï¼ŒDoH3
    - 1.1.1.1
    - 8.8.8.8

  nameserver:                   # é»˜è®¤ DNSï¼Œä¾›æ‰€æœ‰è¯·æ±‚ä½¿ç”¨ï¼Œæ”¯æŒ DoH3 çš„åœ¨å‰é¢
    - https://1.1.1.1/dns-query             # Cloudflareï¼ˆæ”¯æŒ H3ï¼‰
    - https://dns.google/dns-query          # Googleï¼ˆæ”¯æŒ H3ï¼‰
    - https://dns.alidns.com/dns-query      # é˜¿é‡Œï¼ˆå›½å†…ç¨³å®šï¼‰
    - https://223.5.5.5/dns-query           

  nameserver-policy:
    "geosite:cn,private":                # å›½å†…åŸŸåå’Œç§æœ‰åŸŸåå¼ºåˆ¶èµ°å›½å†… DNS
      - https://223.5.5.5/dns-query      # é˜¿é‡Œ
      - https://doh.pub/dns-query        # è…¾è®¯
    "geo:cn": # ä¹Ÿå¯ä»¥ç”¨ geo:cn åŒ¹é… IP
      - https://223.5.5.5/dns-query

  fallback: 
    - https://cloudflare-dns.com/dns-query # Cloudflare DNSå¤‡ç”¨
    - https://dns.google/dns-query         # Google DNSå¤‡ç”¨
    - 1.1.1.1
    - 8.8.8.8

# å‡ºç«™ç­–ç•¥
# æ³¨æ„é”šç‚¹å¿…é¡»æ”¾åœ¨å¼•ç”¨çš„ä¸Šæ–¹ï¼Œå¯ä»¥é›†ä¸­æŠŠé”šç‚¹å…¨éƒ¨æ”¾yamlçš„é¡¶éƒ¨ã€‚
pg: &pg 
    type: select
    proxies: 
      - Device-Proxy
      - Proxy
      - é¦™æ¸¯æ•…è½¬
      - ç¾å›½æ•…è½¬
      - é¦™æ¸¯å‡è¡¡åŠ é€Ÿ
      - ç¾å›½å‡è¡¡åŠ é€Ÿ
      - é¦™æ¸¯è‡ªåŠ¨
      - ç¾å›½è‡ªåŠ¨
      - è‡ªåŠ¨é€‰æ‹©
      - é¦™æ¸¯èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - å…¨éƒ¨èŠ‚ç‚¹
      - DIRECTLY

# ğŸ§ª é«˜é˜¶æ™ºèƒ½åˆ†ç»„æ¨¡æ¿ï¼ˆRTT + LOSS å®¹é”™ + å¹³æ»‘æµé‡ï¼‰
rtt-fallback-template: &rtt-fb
  type: fallback
  <<: *u_s
  lazy: true
  interval: 600
  max-failed-times: 3
  tolerance: 100

rtt-balance-template: &rtt-lb
  type: load-balance
  <<: *u_s
  lazy: true
  interval: 900
  strategy: round-robin
  max-failed-times: 3

# ä»£ç†ç»„
proxy-groups:
#  - name: å®¶å®½é“¾å¼ä»£ç†
#    type: select
#    proxies:
#      - å®¶å®½
#      - ä¸­è½¬èŠ‚ç‚¹
#      - è½åœ°èŠ‚ç‚¹
#      - DIRECTLY

  - name: Device-Proxy
    type: select
    proxies:
      - é¦™æ¸¯å‡è¡¡åŠ é€Ÿ
      - ç¾å›½å‡è¡¡åŠ é€Ÿ
      - é¦™æ¸¯æ•…è½¬
      - ç¾å›½æ•…è½¬
      - DIRECTLY
    icon: "https://static.thenounproject.com/png/165980-200.png"
    filter: "(?i)^(?=.*(?:mac|android)).*$"

  - name: Proxy
    type: select
    proxies: 
      - Device-Proxy
      - é¦™æ¸¯å‡è¡¡åŠ é€Ÿ
      - ç¾å›½å‡è¡¡åŠ é€Ÿ
      - é¦™æ¸¯æ•…è½¬
      - ç¾å›½æ•…è½¬
      - é¦™æ¸¯è‡ªåŠ¨
      - ç¾å›½è‡ªåŠ¨
      - è‡ªåŠ¨é€‰æ‹©
      - é¦™æ¸¯èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - å…¨éƒ¨èŠ‚ç‚¹
      - DIRECTLY
    icon: "https://rules.vlo.cc/icon/manual.svg" 

  - name: Telegram
    type: select
    proxies:
      - Device-Proxy
      - é¦™æ¸¯å‡è¡¡åŠ é€Ÿ
      - ç¾å›½å‡è¡¡åŠ é€Ÿ
    icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png"

  - name: AI
    type: load-balance
    strategy: consistent-hashing
    proxies: 
      - ç¾å›½å‡è¡¡åŠ é€Ÿ
      - ç¾å›½æ•…è½¬
#    filter: "(?i)(ai|chatgpt|openai|claude|gpt|stability|huggingface|vertex|bard|gemini)"
    icon: "https://github.com/DustinWin/ruleset_geodata/releases/download/icons/ai.png" 
    lazy: true
    interval: 900
    max-failed-times: 3

  # ğŸ§ª é«˜é˜¶æ™ºèƒ½å‡è¡¡æµ‹é€Ÿç»„ï¼ˆæ”¯æŒ RTT+è½®è¯¢ï¼ŒAndroid / macOS å‡å…¼å®¹ï¼‰
  - { name: é¦™æ¸¯å‡è¡¡åŠ é€Ÿ, <<: *rtt-lb, filter: "(?i)^(?=.*(?:é¦™æ¸¯|hong ?kong|hk|ğŸ‡­ğŸ‡°)).*$", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/available.png" }
  - { name: ç¾å›½å‡è¡¡åŠ é€Ÿ, <<: *rtt-lb, filter: "(?i)^(?=.*(?:ğŸ‡ºğŸ‡¸|ç¾å›½|US|unitedstates|united ?states|america|usa|æ´›æ‰çŸ¶|è¾¾æ‹‰æ–¯|New ?York|è¥¿é›…å›¾)).*$", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/available.png" }

  # ğŸ›¡ï¸ å›½å®¶æ™ºèƒ½å®¹ç¾ fallbackï¼ˆç”¨äºæ–­æµ/å°é”è‡ªåŠ¨åˆ‡ï¼‰
  - { name: é¦™æ¸¯æ•…è½¬, <<: *rtt-fb, filter: "(?i)^(?=.*(?:é¦™æ¸¯|hong ?kong|hk|ğŸ‡­ğŸ‡°)).*$", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/icon/color/asn.png" }
  - { name: ç¾å›½æ•…è½¬, <<: *rtt-fb, filter: "(?i)^(?=.*(?:ğŸ‡ºğŸ‡¸|ç¾å›½|US|unitedstates|united ?states|america|usa|æ´›æ‰çŸ¶|è¾¾æ‹‰æ–¯|New ?York|è¥¿é›…å›¾)).*$", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/icon/color/asn.png" }

  # ğŸ§  æ™ºèƒ½è‡ªåŠ¨æµ‹é€Ÿï¼ˆå¯å…³é—­ lazy æˆ–è‡ªå®šä¹‰æµ‹é€Ÿ URLï¼‰
  - { name: é¦™æ¸¯è‡ªåŠ¨, type: url-test, <<: *u_s, include-all: false, tolerance: 100, interval: 600, lazy: true, filter: "(?i)^(?=.*(?:é¦™æ¸¯|hong ?kong|hk|ğŸ‡­ğŸ‡°)).*$", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/auto.png" }
  - { name: ç¾å›½è‡ªåŠ¨, type: url-test, <<: *u_s, include-all: false, tolerance: 100, interval: 600, lazy: true, filter: "(?i)^(?=.*(?:ğŸ‡ºğŸ‡¸|ç¾å›½|US|unitedstates|united ?states|america|usa|æ´›æ‰çŸ¶|è¾¾æ‹‰æ–¯|New ?York|è¥¿é›…å›¾)).*$", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/auto.png" }

  - name: è‡ªåŠ¨é€‰æ‹©
    type: url-test
    <<: *u_s
    url: https://cp.cloudflare.com/generate_204
    include-all: false
    tolerance: 50
    interval: 900 #å®‰å“å¯ç”¨1800ï¼Œä¹Ÿå°±æ˜¯åŠå°æ—¶
    lazy: false
    health-check:
      enable: true
      interval: 900
      url: https://cp.cloudflare.com/generate_204
      method: HEAD
      timeout: 5
      expected-status: '204'
    filter: "(?i)^((?!(DIRECTLY|DIRECT|Proxy|Traffic|Expire|Expired|è¿‡æœŸ|å‰©ä½™|æµé‡|å®˜ç½‘|è¶…æ—¶|å¤±æ•ˆ|Invalid|Test|æµ‹é€Ÿ|æœ¬åœ°|Local)).)*$"
    icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/icon/color/urltest.png" 

  # ğŸ“º åª’ä½“å¹³å°
  - { name: TikTok, type: select, proxies: [ç¾å›½å‡è¡¡åŠ é€Ÿ, ç¾å›½æ•…è½¬], icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/TikTok.png" }
  - { name: YouTube, type: select, <<: *pg, icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png" }
  - { name: Speedtest, type: select, proxies: [DIRECTLY, Device-Proxy, Proxy], icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Speedtest.png" }

  - { name: OneDrive, type: select, proxies: [DIRECTLY, Device-Proxy, Proxy], icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/OneDrive.png" }
  - { name: Trackerslist, type: select, proxies: [DIRECTLY, Device-Proxy, Proxy], icon: "https://github.com/DustinWin/ruleset_geodata/releases/download/icons/trackerslist.png" }

  # ğŸŒ åŒºåŸŸèŠ‚ç‚¹ç›´é€‰ï¼ˆä¾› UI æ‰‹åŠ¨åˆ‡æ¢ï¼‰
  - { name: é¦™æ¸¯èŠ‚ç‚¹, type: select, <<: *u, skip-cert-verify: true, include-all: true, filter: "(?i)^(?=.*(?:é¦™æ¸¯|hong ?kong|hk|ğŸ‡­ğŸ‡°)).*$", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png" }
  - { name: ç¾å›½èŠ‚ç‚¹, type: select, <<: *u, skip-cert-verify: true, include-all: true, filter: "(?i)^(?=.*(?:ğŸ‡ºğŸ‡¸|ç¾å›½|US|unitedstates|united ?states|america|usa|æ´›æ‰çŸ¶|è¾¾æ‹‰æ–¯|New ?York|è¥¿é›…å›¾)).*$", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png" }
  - { name: æ—¥æœ¬èŠ‚ç‚¹, type: select, <<: *u, skip-cert-verify: true, include-all: true, filter: "(?i)^(?=.*(?:ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|JP|japan|tokyo|osaka)).*$", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png" }
  - { name: æ–°åŠ å¡èŠ‚ç‚¹, type: select, <<: *u, skip-cert-verify: true, include-all: true, filter: "(?i)^(?=.*(?:ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore)).*$", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Singapore.png" }

#  - { name: ç›´è¿åŸŸå, type: select, proxies: [DIRECTLY, Device-Proxy, Proxy], icon: "https://github.com/DustinWin/ruleset_geodata/releases/download/icons/cn.png" }
  - { name: å…¨éƒ¨èŠ‚ç‚¹, type: select, <<: *u, icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/World_Map.png", include-all: true, filter: "(?i)^((?!(DIRECTLY|DIRECT|Proxy|Traffic|Expire|Expired|è¿‡æœŸ|å‰©ä½™|æµé‡|å®˜ç½‘|è¶…æ—¶|å¤±æ•ˆ|Invalid|Test|æµ‹é€Ÿ|æœ¬åœ°|Local)).)*$" }
  - { name: æ¼ç½‘ä¹‹é±¼, type: select, <<: *pg, icon: "https://testingcf.jsdelivr.net/gh/aihdde/Rules@master/icon/fish.png" }

# è§„åˆ™åŒ¹é…
rules:
  # å®¶å®½é“¾å¼ä»£ç†
#  - DOMAIN-SUFFIX,example.org,å®¶å®½é“¾å¼ä»£ç†
#  - DOMAIN-SUFFIX,example.com,å®¶å®½é“¾å¼ä»£ç†
#  - DOMAIN-SUFFIX,example.org,å®¶å®½é“¾å¼ä»£ç†

  # å¹¿å‘Šè¿‡æ»¤
  - RULE-SET,AWAvenue_Ads_Rule,REJECT # ç§‹é£
  - RULE-SET,blackmatrix7_ad,REJECT

  # è‰²æƒ…ç±»æ‹¦æˆª
#  - RULE-SET,porn,REJECT 

  # Tracker / BT ä¸‹è½½
  - RULE-SET,trackerslist,Trackerslist

  # Telegram
  - RULE-SET,telegram_domain,Telegram

  # AI
  - RULE-SET,ai,AI
  # å­¦æœ¯ç±»
  - DOMAIN-SUFFIX,chat.openai.com,AI
  - DOMAIN-SUFFIX,deepl.com,AI
  - DOMAIN-SUFFIX,grammarly.com,AI
  - DOMAIN-SUFFIX,youglish.com,AI

  # åª’ä½“
  - RULE-SET,youtube_domain,YouTube
  - RULE-SET,tiktok_domain,TikTok

  # å¾®è½¯
  - RULE-SET,onedrive_domain,OneDrive

  # Speedtest
  - RULE-SET,speedtest_domain,Speedtest

  # Apple
  - RULE-SET,apple_cn_domain,DIRECTLY

  # macOS è®¿é—®åŸŸåèµ° mac ä»£ç†ç»„
  - DOMAIN-SUFFIX,icloud.com,Device-Proxy
  - DOMAIN-SUFFIX,mac.com,Device-Proxy
  - DOMAIN-SUFFIX,itunes.apple.com,Device-Proxy
  - DOMAIN-SUFFIX,icloud-content.com,Device-Proxy

  # å®‰å“å¸¸ç”¨åŸŸåèµ° android ä»£ç†ç»„
  # å›½å†…éƒ¨åˆ†
  - DOMAIN-SUFFIX,mi.com,DIRECTLY
  - DOMAIN-SUFFIX,miui.com,DIRECTLY
  - DOMAIN-SUFFIX,xiaomi.com,DIRECTLY
  - DOMAIN-SUFFIX,oneplus.cn,DIRECTLY
  - DOMAIN-SUFFIX,hicloud.com,DIRECTLY
  - DOMAIN-SUFFIX,huawei.com,DIRECTLY
  - DOMAIN-SUFFIX,vivo.com,DIRECTLY
  - DOMAIN-SUFFIX,oppo.com,DIRECTLY
  - DOMAIN-SUFFIX,meizu.com,DIRECTLY
  - DOMAIN-KEYWORD,wechat,DIRECTLY
  - DOMAIN-KEYWORD,alipay,DIRECTLY
  - DOMAIN-KEYWORD,unionpay,DIRECTLY
  - DOMAIN-SUFFIX,amap.com,DIRECTLY
  - DOMAIN-SUFFIX,dianping.com,DIRECTLY
  - DOMAIN-SUFFIX,meituan.com,DIRECTLY
  - DOMAIN-SUFFIX,baidu.com,DIRECTLY
  - DOMAIN-SUFFIX,bilibili.com,DIRECTLY
  - DOMAIN-SUFFIX,iqiyi.com,DIRECTLY
  - DOMAIN-SUFFIX,zhihu.com,DIRECTLY
  - DOMAIN-KEYWORD,xiami,DIRECTLY
  - DOMAIN-KEYWORD,autonavi,DIRECTLY
  - DOMAIN-SUFFIX,toutiao.com,DIRECTLY
  - DOMAIN-KEYWORD,tencent,DIRECTLY

  # ç›´è¿åŸŸå
  - DOMAIN-SUFFIX,julebu.co,DIRECTLY
  - RULE-SET,blackmatrix7_direct,DIRECTLY
  - RULE-SET,private_domain,DIRECTLY
  - RULE-SET,cn_domain,DIRECTLY
  - RULE-SET,cn_ip,DIRECTLY,no-resolve

  # Cloudflare 
  - RULE-SET,geoip_cloudflare,AI,no-resolve

  # å®‰å“ Google æœåŠ¡åŠç³»ç»Ÿç»„ä»¶ä¼˜åŒ–ï¼ˆç¡®ä¿ä»£ç†ï¼‰
  - DOMAIN-SUFFIX,googlevideo.com,Device-Proxy
  - DOMAIN-SUFFIX,googleapis.com,Device-Proxy
  - DOMAIN-SUFFIX,gstatic.com,Device-Proxy
  - DOMAIN-SUFFIX,ggpht.com,Device-Proxy
  - DOMAIN-SUFFIX,play.googleapis.com,Device-Proxy
  - DOMAIN-KEYWORD,android,Device-Proxy
  - DOMAIN-SUFFIX,ota.googlezip.net,Device-Proxy
  - DOMAIN-SUFFIX,update.googleapis.com,Device-Proxy
  - DOMAIN-SUFFIX,connectivitycheck.gstatic.com,DIRECTLY

  # Cloud Photo Backup / Google Photos ä¼˜åŒ–
  - DOMAIN-SUFFIX,photos.google.com,Device-Proxy
  - DOMAIN-SUFFIX,lh3.googleusercontent.com,Device-Proxy
  - DOMAIN-SUFFIX,photos.googleapis.com,Device-Proxy

  # Lineage OS
  - DOMAIN-KEYWORD,lineageos,Device-Proxy

  # å¯é€‰ geoip-no-resolve ç±»å‹
  - RULE-SET,geoip_cloudfront,DIRECTLY,no-resolve
  - RULE-SET,geoip_facebook,Proxy,no-resolve
  - RULE-SET,geoip_netflix,Proxy,no-resolve
  - RULE-SET,geoip_twitter,Proxy,no-resolve

  # å¸¸è§„ä»£ç†
  - RULE-SET,proxy,Proxy
#  - RULE-SET,proxylite,Proxy
  - RULE-SET,gfw_domain,Proxy
  - RULE-SET,geolocation-!cn,Proxy

  # æ¼ç½‘ä¹‹é±¼
  - MATCH,æ¼ç½‘ä¹‹é±¼

# è§„åˆ™é›†
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
  yaml: &yaml {type: http, interval: 86400, behavior: domain, format: yaml}

rule-providers: 
  # å¹¿å‘Šè¿‡æ»¤
  AWAvenue_Ads_Rule: { <<: *yaml, path: ./ruleset/AWAvenue_Ads_Rule_Clash.yaml, url: "https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main//Filters/AWAvenue-Ads-Rule-Clash.yaml" }
  blackmatrix7_ad: { <<: *yaml, path: ./ruleset/blackmatrix7_ad.yaml, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising.yaml" }

  # è‰²æƒ…ç±»æ‹¦æˆª
#  porn: { <<: *domain, path: ./ruleset/category-porn.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-porn.mrs" }

  # fake-ip è¿‡æ»¤ï¼ˆæ ¹æ®å¹³å°å…¼å®¹æ€§é€‰ç”¨ä¸€ä¸ªï¼‰
  fake_ip_filter_DustinWin: { <<: *domain, path: ./ruleset/fake_ip_filter_DustinWin.mrs, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/fakeip-filter.mrs" }
  fake_ip_filter_juewuy: { <<: *class, path: ./ruleset/fake_ip_filter_juewuy.list, url: "https://github.com/juewuy/ShellCrash/blob/dev/public/fake_ip_filter.list" }

  # ç›´è¿ç±»è§„åˆ™
  blackmatrix7_direct: { <<: *yaml, path: ./ruleset/blackmatrix7_direct.yaml, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.yaml" }
  private_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs" }
  cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs" }
  cn_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs" }

  # BT ä¸‹è½½éšç§ç±»
  trackerslist: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/raw/refs/heads/mihomo-ruleset/trackerslist.mrs" }

  # ä»£ç†ç±»è§„åˆ™
  proxy: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/proxy.mrs" }
  gfw_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs" }
  geolocation-!cn: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs" }

  # å¹³å°ç±»è§„åˆ™
  # å­¦æœ¯ç±» 
  ai: { <<: *domain, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/ai.mrs" }

  # cloudflare
  cloudflare:
    <<: *domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/cloudflare.mrs
  geoip_cloudflare: { <<: *ip, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cloudflare.mrs" }  # å¯ no-resolve

  # å›½å¤–åª’ä½“
  youtube_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs" }
  tiktok_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs" }
  geoip_netflix: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs" }  # å¯ no-resolve
  geoip_twitter: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.mrs" }  # å¯ no-resolve
  geoip_facebook: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/facebook.mrs" }  # å¯ no-resolve

  # Telegram
  telegram_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs" }

  # Apple
  apple_cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.mrs" }

  # å¾®è½¯
  onedrive_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.mrs" }

  speedtest_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.mrs" }

  # å¯é€‰æ·»åŠ çš„ geoip åˆ†ç±»ï¼ˆå¦‚éœ€ç»†åˆ† IP å±‚å¤„ç†ï¼‰
  geoip_cloudfront: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cloudfront.mrs" }  # å¯ no-resolve
